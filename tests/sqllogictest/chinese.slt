statement ok
BEGIN;

statement ok
CREATE TABLE documents (
    id SERIAL PRIMARY KEY,
    passage TEXT,
    embedding Bm25Vector
);

statement ok
SELECT create_text_analyzer('text_analyzer1', $$
[pre_tokenizer.jieba]
$$);

statement ok
SELECT create_custom_model_tokenizer_and_trigger(
    tokenizer_name => 'tokenizer1',
    model_name => 'model1',
    text_analyzer_name => 'text_analyzer1',
    table_name => 'documents',
    source_column => 'passage',
    target_column => 'embedding'
);

statement ok
INSERT INTO documents (passage) VALUES 
('红海早过了，船在印度洋面上开驶着，但是太阳依然不饶人地迟落早起，侵占去大部分的夜。'),
('夜仿佛纸浸了油变成半透明体；它给太阳拥抱住了，分不出身来，也许是给太阳陶醉了，所以夕照晚霞褪后的夜色也带着酡红。'),
('到红消醉醒，船舱里的睡人也一身腻汗地醒来，洗了澡赶到甲板上吹海风，又是一天开始。'),
('这是七月下旬，合中国旧历的三伏，一年最热的时候。在中国热得更比常年利害，事后大家都说是兵戈之象，因为这就是民国二十六年【一九三七年】。'),
('这条法国邮船白拉日隆子爵号（VicomtedeBragelonne）正向中国开来。'),
('早晨八点多钟，冲洗过的三等舱甲板湿意未干，但已坐满了人，法国人、德国流亡出来的犹太人、印度人、安南人，不用说还有中国人。'),
('海风里早含着燥热，胖人身体给炎风吹干了，上一层汗结的盐霜，仿佛刚在巴勒斯坦的死海里洗过澡。'),
('毕竟是清晨，人的兴致还没给太阳晒萎，烘懒，说话做事都很起劲。'),
('那几个新派到安南或中国租界当警察的法国人，正围了那年轻善撒娇的犹太女人在调情。'),
('俾斯麦曾说过，法国公使大使的特点，就是一句外国话不会讲；这几位警察并不懂德文，居然传情达意，引得犹太女人格格地笑，比他们的外交官强多了。'),
('这女人的漂亮丈夫，在旁顾而乐之，因为他几天来，香烟、啤酒、柠檬水沾光了不少。'),
('红海已过，不怕热极引火，所以等一会甲板上零星果皮、纸片、瓶塞之外，香烟头定又遍处皆是。'),
('法国人的思想是有名的清楚，他的文章也明白干净，但是他的做事，无不混乱、肮脏、喧哗，但看这船上的乱糟糟。'),
('这船，倚仗人的机巧，载满人的扰攘，寄满人的希望，热闹地行着，每分钟把沾污了人气的一小方小面，还给那无情、无尽、无际的大海。');

query T
SELECT embedding FROM documents ORDER BY id;
----
{1:1, 2:1, 3:1, 4:3, 5:1, 6:1, 7:1, 8:1, 9:1, 10:1, 11:1, 13:1, 14:1, 15:1, 16:1, 17:1, 18:1, 19:1, 21:1, 22:1, 23:1, 24:1, 25:1, 26:1, 27:1, 28:1}
{3:3, 4:3, 11:1, 14:2, 26:1, 27:1, 28:1, 30:1, 31:1, 33:1, 34:1, 35:1, 36:1, 37:1, 38:1, 39:1, 40:1, 41:1, 42:2, 44:1, 45:1, 48:1, 49:1, 50:1, 51:1, 53:1, 54:1, 57:1, 60:1, 61:1, 62:1, 63:1, 64:1, 66:1, 67:1, 68:1, 70:1, 71:1}
{3:1, 4:3, 26:1, 28:1, 54:1, 67:1, 71:1, 73:1, 75:1, 77:1, 78:1, 80:1, 81:1, 83:1, 84:1, 85:1, 86:1, 87:1, 89:1, 91:1, 92:1, 93:1, 94:1, 95:1, 96:1, 98:1, 100:1, 101:1}
{4:4, 6:1, 26:2, 28:2, 54:1, 103:1, 104:1, 105:1, 107:1, 108:2, 109:1, 111:1, 113:1, 114:1, 116:1, 120:1, 121:1, 122:1, 123:1, 124:1, 126:1, 127:1, 128:1, 129:1, 131:1, 132:1, 134:1, 135:1, 136:1, 137:1, 138:1, 139:1, 140:1, 141:1, 142:1, 143:1, 144:1, 145:1, 146:1, 147:1, 148:1, 149:1, 150:1, 151:1, 152:1}
{28:1, 108:1, 135:1, 155:1, 156:1, 157:1, 158:1, 159:1, 160:1, 161:1, 162:1, 163:1, 164:1, 165:1, 167:1}
{3:1, 4:4, 7:1, 26:2, 28:1, 81:3, 93:1, 108:1, 156:1, 169:1, 170:1, 171:1, 172:1, 174:1, 175:1, 177:1, 178:1, 180:1, 181:1, 182:1, 184:1, 185:1, 186:1, 191:1, 192:1, 193:3, 194:1, 195:1, 196:1, 198:1, 199:1, 202:1, 204:1, 207:1, 208:1, 209:1}
{3:1, 4:3, 6:1, 11:1, 26:2, 28:1, 30:1, 42:1, 78:1, 81:1, 94:1, 96:1, 215:1, 216:1, 218:1, 220:1, 222:1, 224:1, 225:1, 229:1, 230:1, 232:1, 235:1, 237:1, 238:1, 239:1, 240:1, 242:1, 243:1, 244:1, 245:1}
{4:3, 14:1, 26:1, 28:1, 42:1, 54:1, 81:1, 128:1, 247:1, 249:1, 253:1, 254:1, 255:1, 258:1, 260:1, 262:1, 263:1, 265:1, 266:1}
{3:1, 4:1, 6:1, 26:2, 28:1, 73:1, 108:1, 156:1, 191:1, 192:1, 198:1, 204:1, 268:2, 269:1, 270:1, 273:1, 275:1, 276:1, 277:1, 283:1, 286:1, 287:1, 288:1, 291:1, 293:1}
{3:1, 4:5, 26:2, 28:1, 40:1, 49:1, 122:1, 129:1, 135:1, 136:1, 156:1, 175:1, 198:1, 277:1, 291:1, 295:1, 296:1, 301:1, 302:1, 304:1, 307:1, 308:1, 309:1, 310:1, 311:1, 314:1, 316:1, 318:1, 319:1, 321:1, 322:1, 323:1, 325:1, 328:1, 329:1, 332:1, 334:1, 335:1, 336:1}
{3:1, 4:3, 6:1, 26:1, 28:1, 51:1, 134:1, 135:1, 193:2, 291:1, 342:1, 343:1, 346:1, 347:1, 348:1, 351:1, 352:1, 355:1, 357:1, 359:1, 360:1, 361:1, 363:1}
{1:1, 4:3, 28:1, 54:1, 60:1, 93:1, 94:1, 98:1, 193:2, 355:1, 366:1, 368:1, 369:1, 370:1, 373:1, 374:1, 377:1, 378:1, 380:1, 382:1, 383:1, 386:1, 387:1, 388:1, 390:1, 391:1}
{4:4, 13:1, 26:5, 28:1, 54:1, 67:1, 135:1, 156:1, 184:1, 191:1, 192:1, 193:2, 263:1, 351:2, 398:1, 400:1, 402:1, 406:1, 408:1, 409:1, 416:1, 417:1, 419:1, 421:1, 424:1, 426:1, 428:1, 429:1}
{3:1, 4:6, 11:1, 26:5, 28:1, 81:3, 193:2, 268:1, 431:1, 433:1, 436:1, 438:1, 441:1, 443:1, 446:1, 448:1, 449:1, 452:1, 453:1, 454:1, 455:1, 457:1, 459:1, 460:1, 462:1, 464:1, 466:1, 468:1, 470:1}

